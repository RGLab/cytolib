# Copyright 2019 Fred Hutchinson Cancer Research Center
# See the included LICENSE file for details on the licence that is granted to the user of this software.
#  GNUMakefile
 
# Just a snippet to stop executing under other make(1) commands
# that won't understand these lines
ifneq (,)
This makefile requires GNU Make.
endif

	
CXX_STD = CXX17

PKG_CPPFLAGS =-DROUT -I../inst/include -DBOOST_NO_AUTO_PTR -DBOOST_FILESYSTEM_NO_CXX20_ATOMIC_REF -DBOOST_FILESYSTEM_SINGLE_THREADED #the last to flagsare needed to compile bundled boost file system library 1.78

cytolib_src=${wildcard *.cpp}
cytolib_objs=${cytolib_src:.cpp=.o}

USERDIR = ${R_PACKAGE_DIR}/lib${R_ARCH}
USERLIB = ${USERDIR}/libcytolib.a

OBJECTS=dummy.o


all: $(SHLIB) 

$(SHLIB): $(USERLIB)

$(USERLIB): ${cytolib_objs} 
	mkdir -p "${USERDIR}"
	$(AR) rs "${USERLIB}" ${cytolib_objs}

clean:
	rm -f $(OBJECTS) ${cytolib_objs} $(SHLIB)
 
